@startuml
'https://plantuml.com/sequence-diagram

class Application{
    {static}+main()
    cars : List<IMovable>
    turbos : List<ITurbo>
    ramps : List<IRamp>
}

package controller {
    class AddRemoveController{
        +AddRemoveController(IAddRemovePanel, IModel)
    }

    class CarController {
        +CarController(ICarView, IModel)
    }

    class ControlPanelController{
        +ControlPanelController(IControlPanel, IModel)
    }

    class GasController{
        +GasController(IGasPanel, IModel)
    }
}

package model {


    class Car{
        -modelName : String
        +getModelName() : String
    }

    class CarFactory{
        createVolvo240(Vector2D) : IMovable
        createSaab95(Vector2D) : ITurbo
        createScania(Vector2D) : IRamp
    }

    class Container{}

    class Ferry{}

    class FIFO{}

    interface ICarView{
        setGasButtonActionListener(ActionListener) : void
        setBrakeButtonActionListener(ActionListener) : void
    }

    interface IModel{
        +startEngine() : void
        +stopEngine() : void
        +gas(int) : void
        +brake(int) : void
        +raise() : void
        +lower() : void
        +setTurboOn() : void
        +setTurboOff() : void
        +EventSource<IMovable>() : getModelUpdateEvent()
        +startTimer() : void
        +addCar() : void
        +removeCar() : void
    }

    interface IMovable{}
    interface IRamp{}
    interface ITransportable{}
    interface ITransporter{}
    interface ITrim{}
    interface ITurbo{}

    class LIFO{}

    class Model{
        -timer : Timer
        -boardWidth : double
        -boardLength : double
        -cars : List<Car>
        -observers : EventSource
        -updateModel() : void
        -isOutOfBounds(Car) : boolean
        -bounceOffWall(Car) : void
        +getObservers() : EventSource
    }

    class Ramp{}
    class Saab95{
    +getCarriedTo() : void
    }

    class TransportTruck{
    +getCarriedTo() : void
    }
    class Vector2D{}
    class Vehicle{}
    class Volvo240{
    +getCarriedTo() : void
    }
    class Workshop{}


    package Scania {

    class Scania{
        ~ramp : Ramp
        ~state : State

        +getCarriedTo() : void


    }


    abstract class State {
        ~{abstract} startEngine(Scania) : IRampVehicle
        ~{abstract} stopEngine(Scania) : IRampVehicle
        ~{abstract} move(Scania) : IRampVehicle
        ~{abstract} turnLeft(Scania) : IRampVehicle
        ~{abstract} turnRight(Scania) : IRampVehicle
        ~{abstract} turnAround(Scania) : IRampVehicle
        ~{abstract} gas(Scania) : IRampVehicle
        ~{abstract} brake(Scania) : IRampVehicle
        ~{abstract} isEngineOn(Scania) : boolean
        ~{abstract} raise(Scania, double) : IRampVehicle
        ~{abstract} lower(Scania, double) : IRampVehicle
    }

    class EngineOnState{}
    class EngineOffLoweredRampState {}
    class RaisedRampState {}

    State <|-- EngineOffLoweredRampState
    State <|-- EngineOnState
    State <|-- RaisedRampState
    Scania *--> State

}


}

package observer {
    class EventSource {
        - subscribers : List<EventObserver<T>>
        + addSubscriber(EventObserver<T>) : void
        + removeSubscriber(EventObserver<T>) : void
        + publish(List<? extends T>) : void
    }

    interface EventObserver {
        + actOnPublish(List<? extends T>) : void
    }
}

package view {

    class AddRemovePanel{
        +Addremovepanel(EventSource)
    }

    class CarReciever{}


    class CarView{
        panels : List<JPanel>
    }

    class ControlPanel{}

    class DrawPanel{
        +DrawPanel(EventSource)
    }

    class GasPanel{}

    interface IAddRemovePanel {
        addCarButtonActionListener(ActionListener listener) : void
        removeCarButtonActionListener(ActionListener listener) : void
    }

    interface IControlPanel{
        setStartButtonActionListener(ActionListener listener) : void
        setStopButtonActionListener(ActionListener listener) : void
        setTurboOnButtonActionListener(ActionListener listener) : void
        setTurboOffButtonActionListener(ActionListener listener) : void
        setLiftBedButtonActionListener(ActionListener listener) : void
        setLowerBedButtonActionListener(ActionListener listener) : void
    }

    interface IGasPanel{}
    interface ILoggable{}
    interface IPaintable{}

    class LoggerPanel{
        +LoggerPanel(EventSource)
    }

    class LoggerWrapper{}
    class PaintableWrapper{}
}

package Swing {
    class JSpinner{}
    class JPanel{}
    class JButton {}
    class JLabel {}
    class JFrame {}
}

Application ...> IModel
Application *..> CarFactory


AddRemoveController ...> IAddRemovePanel
AddRemoveController ...> IModel

CarController ...> ICarView
CarController ...> IModel

ControlPanelController ...> IControlPanel
ControlPanelController ...> IModel

GasController ...> IGasPanel
GasController ...> IModel

Car --> Vehicle
Car ...|> ITransportable

CarFactory ..> IMovable
CarFactory ..> ITurbo
CarFactory ..> IRamp

IRamp ---|> IMovable
ITrim ---|> IMovable
ITurbo ---|> IMovable

Model ....|> IModel
Model ----> EventSource

Saab95 ...|> ITurbo
Saab95 ---|> Car
Saab95 ...> CarFactory

Scania ...|> IRamp
Scania ---|> Car
Scania ...> CarFactory

Vehicle ..|> IMovable

Volvo240 ...|> ITrim
Volvo240 ---|> Car
Volvo240 ...> CarFactory

EventSource *...> EventObserver


AddRemovePanel ..|> IAddRemovePanel

CarReciever ...|> EventObserver

CarView *...> JComponent


ControlPanel ...|> IControlPanel

DrawPanel ....> EventObserver


GasPanel ..|> IGasPanel


LoggerPanel ...> EventObserver

LoggerWrapper ...|> ILoggable
LoggerWrapper *...> IMovable

PaintableWrapper ...|> IPaintable
PaintableWrapper ...> IMovable



@enduml
